{% extends "base.html" %}

{% block title %}{{ course.title }} - Educational Platform{% endblock %}

{% block content %}
    <h1>{{ course.title }}</h1>
    <p><strong>Level:</strong> {{ course.level }}</p>
    <p><strong>Description:</strong> {{ course.description }}</p>
    <p><strong>Prerequisites:</strong> {{ course.prerequisites }}</p>
    <p><strong>Learning Outcomes:</strong> {{ course.learning_outcomes }}</p>
    <p><strong>Instructor:</strong> {{ course.instructor.username }}</p>
    
    {% if current_user.is_authenticated and (current_user.id == course.instructor_id or current_user.is_admin) %}
        <a href="{{ url_for('edit_course', course_id=course.id) }}" class="btn btn-primary">Edit Course</a>
        <form action="{{ url_for('delete_course', course_id=course.id) }}" method="POST" style="display: inline;">
            <input type="submit" value="Delete Course" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this course?');">
        </form>
    {% endif %}
    
    {% if current_user.is_authenticated and current_user.is_admin and not course.is_approved %}
        <a href="{{ url_for('approve_course', course_id=course.id) }}" class="btn btn-success">Approve Course</a>
    {% endif %}

    <h2>Lessons</h2>
    {% if course.lessons %}
        <ul>
        {% for lesson in course.lessons %}
            <li>{{ lesson.title }} - Order: {{ lesson.order }}</li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No lessons available for this course yet.</p>
    {% endif %}
{% endblock %}
